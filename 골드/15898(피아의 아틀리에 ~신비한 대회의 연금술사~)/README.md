# <span style="color:orange; font-size:17pt; font-weight:bold">BOJ 15898번 피아의 아틀리에 ~신비한 대회의 연금술사~ 자바(java)  풀이</span>
- 랭크 : 골드1
- [백준 15898번 피아의 아틀리에 ~신비한 대회의 연금술사~ ](https://www.acmicpc.net/problem/15898)
<br><br>

## [티스토리 주소](https://hoho325.tistory.com/)
<br><br>

# <span style="color: red; font-size:15pt">문제 정리</span>
1. 5x5 격자 모양 가마에 서로 다른 재료 3개를 순서대로 넣어 최고 품질의 폭탄을 만들어야 한다.
2. 재료는 대회에서 준비해주며, 넣을 수 있는 재료의 후보는 10개 이하이다. 이 중에서 3개를 골라 순서를 정해 가마에 넣는다.
3. 초기 모든 가마칸의 품질은 0, 원소는 흰색이다.
4. 재료는 4x4 모양이며 재료의 i행 j열에는 2가지 정보가 있다.
    4.1 효능: 가마 한 칸의 품질을 바꾸는 -9이상 9이하의 정수 xij
    4.2 원소: 가마 한 칸의 원소를 바꿀 수 있는 색 cij(R, B, G, Y, W)
5. 재료를 가마에 넣을능는 5x5 격자를 벗어날 수 없다. 회전은 가능하다.
6. 재료를 가마에 넣을 때, 가마의 상태는 다음과 같이 바뀐다.
    6.1 재료가 위치하지 않는 가마의 격자칸은 아무런 변화가 없다.
    6.2 재료가 위치한 가마의 격자칸에 있는 품질과 원소값은 바뀔 수 있다.
    6.3 격자의 품질은 재료의 효능이 더해진다. 더한 뒤의 값이 음수인 경우 0으로, 9초과인 경우 9로 바뀐다
    6.4 격자의 색은 재료의 원소가 흰색인 경우 그대로, 아닌 경우 원소와 같은 색으로 칠해진다.
7. 재료 3개를 모두 넣어야만 폭탄이 만들어지며, 폭탄의 품질은 다음과 같이 계산된다. 가마의 최종 상태에서 빨강, 파랑, 초록, 노랑으로 칠해진 부분의 품질 합을 각각 R,B,G,Y라고 할때
    폭탄의 품질 = 7R + 5B + 3G + 2Y
8. 폭탄을 만들기 위한 재료의 후보가 주어졌을 때, 재료를 적절히 선택하고 배치하여 만들 수 있는 폭탄의 최대 품질 구해라
9. 재료의 개수는 3개 이상 10개 이하

<br><br>

# <span style="color: red; font-size:15pt">문제 접근</span>
처음에는 모든 순열을 구해서 했으나 시간초과로 dfs 풀이로 변환하였습니다.  
이 문제는 브루트 포스로 완전탐색을 해야 합니다.
최대 10개의 재료 중에 3개의 순열을 구해야 하기 때문에 10*9*8 입니다.   
거기에 더해서 재료마다 회전이 가능하므로 4가지  
그리고 위치도 4가지 위치가 가능하므로 재료마다 4가지 가능합니다.  
그렇기 때문에 충분히 3초안에 모든 경우를 조사할 수 있습니다. 
dfs를 이용해 이전 계산 상태를 유지하면서 계산해 나갑니다. 
<br><br>

# <span style="color: red; font-size:15pt">문제 접근</span>
1. Info class를 만들어 효과와 원소를 저장합니다.
2. ingredients 배열은 4차원 배열로 만듭니다. 
```
[재료번호][][][]
[][dir][][]: 0: 원래 상태, 1: 90도, 2: 180도, 3: 270도 (시계방향)
[][][4][4]: 4x4 재료
```
3. 계산할 때 마다 회전하게 되면 시간이 오래걸리므로 미리 회전한 재료를 rotate 함수를 이용해 만들어둡니다.
이전 상태의 재료(dir-1)를 이용해서 다음 회전한 상태의 재료(dir)를 구합니다.
4. 가마의 상태를 저장할 gama 변수를 초기화 합니다.
5. dfs를 이용해 num 개의 재료중에 하나씩 3개를 선택해 나갑니다.
    선택할때 마다 배치와 회전을 모두 선택하여 가마에 재료를 넣습니다. j는 x위치, k는 y위치, q는 회전 상태를 나타냅니다.
6. 계산시에는 새로운 배열을 만들어서 새로운 배열에 더한 값을 담아서 리턴합니다.(그대로 하게 되면 값이 덮어씌워짐)
7. 3가지의 재료를 모두 다 넣었다면 흰색이 아닌 경우에만 sum 배열에 더합니다. 그리고 계산식에 맡게 품질을 계산해서 max값을 갱신합니다.